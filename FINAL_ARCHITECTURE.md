# ìµœì¢… ë²”ìš© MSA ì•„í‚¤í…ì²˜

## ê°œìš”

**Tenant ëª¨ë¸ ê¸°ë°˜ ë©€í‹° í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜**

í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì—¬ëŸ¬ í”„ë¡œì íŠ¸ê°€ ê³µìœ í•˜ë©´ì„œë„ ë°ì´í„°ê°€ ì™„ì „íˆ ê²©ë¦¬ë˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤.

---

## ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ì¸í„°ë„· (Public Internet)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                â”‚                â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ jaehyeong.   â”‚  â”‚  myshop.    â”‚  â”‚  mytube.     â”‚
         â”‚    tech      â”‚  â”‚    com      â”‚  â”‚    io        â”‚
         â”‚  (ë¸”ë¡œê·¸)     â”‚  â”‚  (ì‡¼í•‘ëª°)    â”‚  â”‚  (ë™ì˜ìƒ)     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                â”‚                â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚    Traefik / Nginx      â”‚
                     â”‚   (Reverse Proxy)       â”‚
                     â”‚  + SSL Termination      â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚     Kong Gateway        â”‚
                     â”‚   + Rate Limiting       â”‚
                     â”‚   + Tenant Routing      â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Service    â”‚   â”‚  Comment Service   â”‚   â”‚ Storage Service  â”‚
â”‚   (ë²”ìš©)          â”‚   â”‚   (ë²”ìš©)            â”‚   â”‚   (ë²”ìš©)          â”‚
â”‚   Port: 3001     â”‚   â”‚   Port: 3003       â”‚   â”‚   Port: 3006     â”‚
â”‚                  â”‚   â”‚                    â”‚   â”‚                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Tenant Resolverâ”‚ â”‚   â”‚ â”‚Tenant Resolverâ”‚ â”‚   â”‚ â”‚Tenant Resolverâ”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚        â”‚         â”‚   â”‚          â”‚         â”‚   â”‚        â”‚         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ JWT per      â”‚ â”‚   â”‚ â”‚ Resource-      â”‚ â”‚   â”‚ â”‚ Universal    â”‚ â”‚
â”‚ â”‚ Tenant       â”‚ â”‚   â”‚ â”‚ Agnostic       â”‚ â”‚   â”‚ â”‚ File Storage â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                         â”‚                        â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
   â”‚   DB    â”‚               â”‚   DB    â”‚              â”‚   DB    â”‚
   â”‚ auth_db â”‚               â”‚comment_ â”‚              â”‚storage_ â”‚
   â”‚         â”‚               â”‚   db    â”‚              â”‚   db    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚          í”„ë¡œì íŠ¸ ì „ìš© ì„œë¹„ìŠ¤                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Blog Service   â”‚  â”‚  Page Service   â”‚
        â”‚ (jaehyeong-tech)â”‚  â”‚ (jaehyeong-tech)â”‚
        â”‚  Port: 3002     â”‚  â”‚  Port: 3004     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                    â”‚
            â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
            â”‚   DB    â”‚          â”‚   DB    â”‚
            â”‚ blog_db â”‚          â”‚ page_db â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ê³µìœ  ì¸í”„ë¼ (Shared Infrastructure)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  RabbitMQ    â”‚   â”‚    Redis     â”‚   â”‚   PostgreSQL   â”‚ â”‚
â”‚  â”‚  (ì´ë²¤íŠ¸)     â”‚   â”‚   (ìºì‹œ)      â”‚   â”‚   (ë©”íƒ€ DB)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚          OCI Object Storage (íŒŒì¼ ì €ì¥ì†Œ)              â”‚ â”‚
â”‚  â”‚  jaehyeong-tech/, my-shop/, my-tube/                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Tenant ê²©ë¦¬ ë©”ì»¤ë‹ˆì¦˜

### ë°ì´í„°ë² ì´ìŠ¤ ë ˆë²¨ ê²©ë¦¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    auth_db (PostgreSQL)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ tenants í…Œì´ë¸”                                       â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ id               â”‚ name         â”‚ jwtSecret         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ tenant-001       â”‚jaehyeong-techâ”‚ secret-abc123...  â”‚  â”‚
â”‚  â”‚ tenant-002       â”‚my-shop       â”‚ secret-xyz789...  â”‚  â”‚
â”‚  â”‚ tenant-003       â”‚my-tube       â”‚ secret-def456...  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ users í…Œì´ë¸”                                         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ id   â”‚ tenantId  â”‚ email          â”‚ name            â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ u-1  â”‚tenant-001 â”‚user@blog.com   â”‚ ë¸”ë¡œê·¸ ì‚¬ìš©ì  â”‚  â”‚
â”‚  â”‚ u-2  â”‚tenant-001 â”‚admin@blog.com  â”‚ ë¸”ë¡œê·¸ ê´€ë¦¬ì  â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ u-3  â”‚tenant-002 â”‚user@blog.com   â”‚ ì‡¼í•‘ëª° ì‚¬ìš©ì  â”‚  â”‚ â† ê°™ì€ ì´ë©”ì¼!
â”‚  â”‚ u-4  â”‚tenant-002 â”‚customer@shop.comâ”‚ ê³ ê°1         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ u-5  â”‚tenant-003 â”‚user@blog.com   â”‚ ë™ì˜ìƒ ì‚¬ìš©ì  â”‚  â”‚ â† ë˜ ê°™ì€ ì´ë©”ì¼!
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                            â”‚
â”‚  UNIQUE INDEX: (tenantId, email)  â† í•µì‹¬!                 â”‚
â”‚  ëª¨ë“  ì¿¼ë¦¬: WHERE tenantId = ? AND ...                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### JWT ê²©ë¦¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              JWT ë°œê¸‰ ë° ê²€ì¦ (Tenantë³„ Secret)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[jaehyeong-tech] íšŒì›ê°€ì…
    â†“
POST /api/auth/register
Header: X-Tenant-Name: jaehyeong-tech
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tenant Resolver                         â”‚
â”‚ â†’ Tenant ì¡°íšŒ: jaehyeong-tech          â”‚
â”‚ â†’ jwtSecret: "secret-abc123..."        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JWT ë°œê¸‰                                â”‚
â”‚ jwt.sign(                               â”‚
â”‚   { userId, tenantId: 'tenant-001' },   â”‚
â”‚   "secret-abc123...",  â† Tenantë³„ Secretâ”‚
â”‚   { expiresIn: '7d' }                   â”‚
â”‚ )                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
            JWT Token ë°˜í™˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[my-shop] íšŒì›ê°€ì…
    â†“
POST /api/auth/register
Header: X-Tenant-Name: my-shop
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tenant Resolver                         â”‚
â”‚ â†’ Tenant ì¡°íšŒ: my-shop                 â”‚
â”‚ â†’ jwtSecret: "secret-xyz789..."        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JWT ë°œê¸‰                                â”‚
â”‚ jwt.sign(                               â”‚
â”‚   { userId, tenantId: 'tenant-002' },   â”‚
â”‚   "secret-xyz789...",  â† ë‹¤ë¥¸ Secret!   â”‚
â”‚   { expiresIn: '30d' }  â† ë‹¤ë¥¸ ë§Œë£Œì‹œê°„!â”‚
â”‚ )                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
            JWT Token ë°˜í™˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[Cross-Tenant ê³µê²© ì‹œë„] âŒ
    â†“
GET /api/auth/me
Header: X-Tenant-Name: my-shop
Header: Authorization: Bearer <jaehyeong-tech JWT>
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tenant Resolver                         â”‚
â”‚ â†’ Tenant: my-shop                      â”‚
â”‚ â†’ jwtSecret: "secret-xyz789..."        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JWT ê²€ì¦                                â”‚
â”‚ jwt.verify(                             â”‚
â”‚   token,                                â”‚
â”‚   "secret-xyz789..."  â† my-shop Secret  â”‚
â”‚ )                                       â”‚
â”‚ â†’ âŒ ê²€ì¦ ì‹¤íŒ¨!                         â”‚
â”‚    (jaehyeong-tech Secretë¡œ ë°œê¸‰ëœ í† í°)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
            401 Unauthorized
```

---

## ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: jaehyeong-tech (ë¸”ë¡œê·¸)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  jaehyeong.tech ì‚¬ìš©ì                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  1. íšŒì›ê°€ì…                  â”‚
        â”‚  POST /api/auth/register      â”‚
        â”‚  X-Tenant-Name: jaehyeong-techâ”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Auth Service                                 â”‚
        â”‚  â†’ Tenant: jaehyeong-tech ë¡œë“œ               â”‚
        â”‚  â†’ JWT Secret: abc123...                     â”‚
        â”‚  â†’ ë¹„ë°€ë²ˆí˜¸ ì •ì±…: ìµœì†Œ 8ì, ëŒ€ë¬¸ì í•„ìš”        â”‚
        â”‚  â†’ ì‚¬ìš©ì ìƒì„±: tenantId = 'tenant-001'      â”‚
        â”‚  â†’ JWT ë°œê¸‰ (abc123... Secret)               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
                  JWT Token ë°˜í™˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  2. ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ ì¡°íšŒ         â”‚
        â”‚  GET /api/posts                â”‚
        â”‚  Authorization: Bearer <JWT>   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Blog Service (jaehyeong-tech ì „ìš©)          â”‚
        â”‚  â†’ JWT ê²€ì¦ (Auth Serviceì— í™•ì¸)            â”‚
        â”‚  â†’ tenantId = 'tenant-001' í™•ì¸               â”‚
        â”‚  â†’ í¬ìŠ¤íŠ¸ ì¡°íšŒ                                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
                  í¬ìŠ¤íŠ¸ ëª©ë¡ ë°˜í™˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  3. ëŒ“ê¸€ ì‘ì„±                  â”‚
        â”‚  POST /api/comments            â”‚
        â”‚  {                             â”‚
        â”‚    resourceType: "post",       â”‚
        â”‚    resourceId: "post-123",     â”‚
        â”‚    content: "ì¢‹ì€ ê¸€ì´ë„¤ìš”!"   â”‚
        â”‚  }                             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Comment Service (ë²”ìš©)                       â”‚
        â”‚  â†’ Tenant: jaehyeong-tech                    â”‚
        â”‚  â†’ tenantId = 'tenant-001'                   â”‚
        â”‚  â†’ ëŒ“ê¸€ ìƒì„±:                                 â”‚
        â”‚     tenantId: 'tenant-001'                   â”‚
        â”‚     resourceType: 'post'                     â”‚
        â”‚     resourceId: 'post-123'                   â”‚
        â”‚     authorId: 'u-1'                          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
                  ëŒ“ê¸€ ìƒì„± ì™„ë£Œ
```

---

### ì‹œë‚˜ë¦¬ì˜¤ 2: my-shop (ì‡¼í•‘ëª°)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  myshop.com ì‚¬ìš©ì                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  1. íšŒì›ê°€ì…                  â”‚
        â”‚  POST /api/auth/register      â”‚
        â”‚  X-Tenant-Name: my-shop       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Auth Service (ê°™ì€ ì„œë¹„ìŠ¤!)                  â”‚
        â”‚  â†’ Tenant: my-shop ë¡œë“œ                      â”‚
        â”‚  â†’ JWT Secret: xyz789... (ë‹¤ë¥¸ Secret!)      â”‚
        â”‚  â†’ ë¹„ë°€ë²ˆí˜¸ ì •ì±…: ìµœì†Œ 12ì, íŠ¹ìˆ˜ë¬¸ì í•„ìš”    â”‚
        â”‚  â†’ ì‚¬ìš©ì ìƒì„±: tenantId = 'tenant-002'      â”‚
        â”‚  â†’ JWT ë°œê¸‰ (xyz789... Secret, 30ì¼ ë§Œë£Œ)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
                  JWT Token ë°˜í™˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  2. ìƒí’ˆ ë¦¬ë·° ì‘ì„±             â”‚
        â”‚  POST /api/comments            â”‚
        â”‚  {                             â”‚
        â”‚    resourceType: "product",    â”‚
        â”‚    resourceId: "prod-456",     â”‚
        â”‚    content: "í’ˆì§ˆì´ ì¢‹ì•„ìš”!"   â”‚
        â”‚  }                             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Comment Service (ê°™ì€ ì„œë¹„ìŠ¤!)               â”‚
        â”‚  â†’ Tenant: my-shop                           â”‚
        â”‚  â†’ tenantId = 'tenant-002'                   â”‚
        â”‚  â†’ ëŒ“ê¸€ ìƒì„±:                                 â”‚
        â”‚     tenantId: 'tenant-002'                   â”‚
        â”‚     resourceType: 'product' (ë‹¤ë¥¸ íƒ€ì…!)      â”‚
        â”‚     resourceId: 'prod-456'                   â”‚
        â”‚     authorId: 'u-3'                          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
                  ë¦¬ë·° ìƒì„± ì™„ë£Œ
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  3. ìƒí’ˆ ì´ë¯¸ì§€ ì—…ë¡œë“œ         â”‚
        â”‚  POST /api/upload              â”‚
        â”‚  {                             â”‚
        â”‚    resourceType: "product",    â”‚
        â”‚    resourceId: "prod-456"      â”‚
        â”‚  }                             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Storage Service (ê°™ì€ ì„œë¹„ìŠ¤!)               â”‚
        â”‚  â†’ Tenant: my-shop                           â”‚
        â”‚  â†’ OCI í´ë”: my-shop/products/               â”‚
        â”‚  â†’ íŒŒì¼ ë©”íƒ€ë°ì´í„°:                           â”‚
        â”‚     tenantId: 'tenant-002'                   â”‚
        â”‚     resourceType: 'product'                  â”‚
        â”‚     resourceId: 'prod-456'                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
                  ì´ë¯¸ì§€ URL ë°˜í™˜
```

---

### ì‹œë‚˜ë¦¬ì˜¤ 3: my-tube (ë™ì˜ìƒ í”Œë«í¼)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  mytube.io ì‚¬ìš©ì                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  1. íšŒì›ê°€ì…                  â”‚
        â”‚  POST /api/auth/register      â”‚
        â”‚  X-Tenant-Name: my-tube       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Auth Service (ê°™ì€ ì„œë¹„ìŠ¤!)                  â”‚
        â”‚  â†’ Tenant: my-tube ë¡œë“œ                      â”‚
        â”‚  â†’ JWT Secret: def456...                     â”‚
        â”‚  â†’ ë¹„ë°€ë²ˆí˜¸ ì •ì±…: ìµœì†Œ 8ì                    â”‚
        â”‚  â†’ ì‚¬ìš©ì ìƒì„±: tenantId = 'tenant-003'      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  2. ë™ì˜ìƒ ëŒ“ê¸€ ì‘ì„±           â”‚
        â”‚  POST /api/comments            â”‚
        â”‚  {                             â”‚
        â”‚    resourceType: "video",      â”‚
        â”‚    resourceId: "vid-789",      â”‚
        â”‚    content: "ë©‹ì§„ ì˜ìƒ!"       â”‚
        â”‚  }                             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Comment Service (ê°™ì€ ì„œë¹„ìŠ¤!)               â”‚
        â”‚  â†’ Tenant: my-tube                           â”‚
        â”‚  â†’ tenantId = 'tenant-003'                   â”‚
        â”‚  â†’ ëŒ“ê¸€ ìƒì„±:                                 â”‚
        â”‚     resourceType: 'video' (ë˜ ë‹¤ë¥¸ íƒ€ì…!)     â”‚
        â”‚     resourceId: 'vid-789'                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ë°ì´í„° ê²©ë¦¬ ì‹œê°í™”

### Comment Service DB êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    comment_db (PostgreSQL)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  comments í…Œì´ë¸”                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ id  â”‚ tenantId  â”‚ resource â”‚ resourceId â”‚ content      â”‚  â”‚
â”‚  â”‚     â”‚           â”‚ Type     â”‚            â”‚              â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ c-1 â”‚tenant-001 â”‚ post     â”‚ post-123   â”‚ ì¢‹ì€ ê¸€!     â”‚  â”‚ â† jaehyeong-tech
â”‚  â”‚ c-2 â”‚tenant-001 â”‚ post     â”‚ post-456   â”‚ ê°ì‚¬í•©ë‹ˆë‹¤   â”‚  â”‚ â† jaehyeong-tech
â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ c-3 â”‚tenant-002 â”‚ product  â”‚ prod-456   â”‚ í’ˆì§ˆ ì¢‹ì•„ìš”! â”‚  â”‚ â† my-shop
â”‚  â”‚ c-4 â”‚tenant-002 â”‚ product  â”‚ prod-789   â”‚ ì¶”ì²œí•©ë‹ˆë‹¤   â”‚  â”‚ â† my-shop
â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ c-5 â”‚tenant-003 â”‚ video    â”‚ vid-789    â”‚ ë©‹ì§„ ì˜ìƒ!   â”‚  â”‚ â† my-tube
â”‚  â”‚ c-6 â”‚tenant-003 â”‚ video    â”‚ vid-123    â”‚ ìµœê³ !        â”‚  â”‚ â† my-tube
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                â”‚
â”‚  ëª¨ë“  ì¿¼ë¦¬:                                                     â”‚
â”‚  SELECT * FROM comments                                        â”‚
â”‚  WHERE tenantId = ? AND resourceType = ? AND resourceId = ?   â”‚
â”‚                                                                â”‚
â”‚  âœ… Tenant ê²©ë¦¬ ë³´ì¥                                           â”‚
â”‚  âœ… ë¦¬ì†ŒìŠ¤ íƒ€ì… ë…ë¦½ì                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ìš”ì²­ íë¦„ (End-to-End)

### jaehyeong-tech ëŒ“ê¸€ ì‘ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â”‚ jaehyeong.   â”‚
â”‚    tech      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ POST /api/comments
       â”‚ Authorization: Bearer <JWT>
       â”‚ { resourceType: 'post', resourceId: 'post-123', content: '...' }
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Traefik/Nginx       â”‚
â”‚  (SSL Termination)   â”‚
â”‚  jaehyeong.tech      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Header ì¶”ê°€: X-Tenant-Name: jaehyeong-tech
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Kong Gateway       â”‚
â”‚  (API Gateway)       â”‚
â”‚  /api/comments       â”‚
â”‚  â†’ comment-service   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ X-Tenant-Name: jaehyeong-tech
       â”‚ Authorization: Bearer <JWT>
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Comment Service                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. Tenant Resolver Middleware                â”‚   â”‚
â”‚  â”‚    â†’ Tenant ì¡°íšŒ: jaehyeong-tech            â”‚   â”‚
â”‚  â”‚    â†’ req.tenant = { id: 'tenant-001', ... } â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â†“                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 2. Authenticate Middleware                   â”‚   â”‚
â”‚  â”‚    â†’ Auth Service í˜¸ì¶œ: JWT ê²€ì¦            â”‚   â”‚
â”‚  â”‚    â†’ X-Tenant-Name: jaehyeong-tech ì „ë‹¬     â”‚   â”‚
â”‚  â”‚    â†’ req.user = { id: 'u-1', ... }          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                      â†“                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 3. createComment Controller                  â”‚   â”‚
â”‚  â”‚    const tenant = req.tenant;                â”‚   â”‚
â”‚  â”‚    const user = req.user;                    â”‚   â”‚
â”‚  â”‚                                              â”‚   â”‚
â”‚  â”‚    await prisma.comment.create({             â”‚   â”‚
â”‚  â”‚      data: {                                 â”‚   â”‚
â”‚  â”‚        tenantId: tenant.id,  â† 'tenant-001' â”‚   â”‚
â”‚  â”‚        resourceType: 'post',                 â”‚   â”‚
â”‚  â”‚        resourceId: 'post-123',               â”‚   â”‚
â”‚  â”‚        content: '...',                       â”‚   â”‚
â”‚  â”‚        authorId: user.id                     â”‚   â”‚
â”‚  â”‚      }                                       â”‚   â”‚
â”‚  â”‚    });                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              comment_db (PostgreSQL)                 â”‚
â”‚  INSERT INTO comments (                              â”‚
â”‚    id, tenantId, resourceType, resourceId, ...       â”‚
â”‚  ) VALUES (                                          â”‚
â”‚    'c-1', 'tenant-001', 'post', 'post-123', ...      â”‚
â”‚  );                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
                  ëŒ“ê¸€ ìƒì„± ì™„ë£Œ
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ì´ë²¤íŠ¸ ë°œí–‰ (ì„ íƒì )                  â”‚
â”‚  RabbitMQ: comment.created                           â”‚
â”‚  {                                                   â”‚
â”‚    tenantId: 'tenant-001',                          â”‚
â”‚    resourceType: 'post',                            â”‚
â”‚    resourceId: 'post-123',                          â”‚
â”‚    commentId: 'c-1'                                 â”‚
â”‚  }                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ë¹„ìš© ë¹„êµ

### ê°œë³„ ë°°í¬ (ì „í†µ ë°©ì‹)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  jaehyeong-tech (í”„ë¡œì íŠ¸ 1)                        â”‚
â”‚  â”œâ”€ Auth Service      $50/ì›”                       â”‚
â”‚  â”œâ”€ Comment Service   $50/ì›”                       â”‚
â”‚  â””â”€ Storage Service   $50/ì›”                       â”‚
â”‚  ì†Œê³„: $150/ì›”                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  my-shop (í”„ë¡œì íŠ¸ 2)                               â”‚
â”‚  â”œâ”€ Auth Service      $50/ì›”                       â”‚
â”‚  â”œâ”€ Comment Service   $50/ì›”                       â”‚
â”‚  â””â”€ Storage Service   $50/ì›”                       â”‚
â”‚  ì†Œê³„: $150/ì›”                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  my-tube (í”„ë¡œì íŠ¸ 3)                               â”‚
â”‚  â”œâ”€ Auth Service      $50/ì›”                       â”‚
â”‚  â”œâ”€ Comment Service   $50/ì›”                       â”‚
â”‚  â””â”€ Storage Service   $50/ì›”                       â”‚
â”‚  ì†Œê³„: $150/ì›”                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì´ ë¹„ìš©: $450/ì›”
```

### ë²”ìš© ì„œë¹„ìŠ¤ ê³µìœ  (Tenant ëª¨ë¸)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë²”ìš© ì„œë¹„ìŠ¤ (3ê°œ í”„ë¡œì íŠ¸ ê³µìœ )                     â”‚
â”‚  â”œâ”€ Auth Service      $100/ì›” (2 replicas)         â”‚
â”‚  â”œâ”€ Comment Service   $100/ì›” (2 replicas)         â”‚
â”‚  â””â”€ Storage Service   $100/ì›” (2 replicas)         â”‚
â”‚  ì†Œê³„: $300/ì›”                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í”„ë¡œì íŠ¸ ì „ìš© ì„œë¹„ìŠ¤                                â”‚
â”‚  â”œâ”€ Blog Service      $50/ì›”  (jaehyeong-tech)     â”‚
â”‚  â”œâ”€ Page Service      $50/ì›”  (jaehyeong-tech)     â”‚
â”‚  â””â”€ ê¸°íƒ€ ì „ìš© ì„œë¹„ìŠ¤  $50/ì›”  (my-shop, my-tube)   â”‚
â”‚  ì†Œê³„: $150/ì›”                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì´ ë¹„ìš©: $450/ì›”

âœ… ê°œë³„ ë°°í¬ì™€ ë™ì¼í•˜ì§€ë§Œ...
   - í”„ë¡œì íŠ¸ ì¶”ê°€ ì‹œ ì¦ë¶„ ë¹„ìš© 0ì›!
   - 4ë²ˆì§¸ í”„ë¡œì íŠ¸ë¶€í„° í° ì ˆê° íš¨ê³¼
```

### 4ê°œ í”„ë¡œì íŠ¸ ì‹œ

```
ê°œë³„ ë°°í¬:
  4 Ã— $150 = $600/ì›”

ë²”ìš© ì„œë¹„ìŠ¤ ê³µìœ :
  ë²”ìš© ì„œë¹„ìŠ¤: $300/ì›” (ë™ì¼)
  ì „ìš© ì„œë¹„ìŠ¤: $200/ì›” (+$50)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ì´: $500/ì›”

ì ˆê°: $100/ì›” (17%)
```

### 10ê°œ í”„ë¡œì íŠ¸ ì‹œ

```
ê°œë³„ ë°°í¬:
  10 Ã— $150 = $1,500/ì›”

ë²”ìš© ì„œë¹„ìŠ¤ ê³µìœ :
  ë²”ìš© ì„œë¹„ìŠ¤: $400/ì›” (ìŠ¤ì¼€ì¼ì—…)
  ì „ìš© ì„œë¹„ìŠ¤: $500/ì›”
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ì´: $900/ì›”

ì ˆê°: $600/ì›” (40%)
```

---

## í•µì‹¬ ì¥ì 

### 1. ì™„ì „í•œ ë°ì´í„° ê²©ë¦¬

```
âœ… jaehyeong-techì˜ ì‚¬ìš©ì ë°ì´í„°
   â†’ my-shopì—ì„œ ì ˆëŒ€ ì ‘ê·¼ ë¶ˆê°€

âœ… my-shopì˜ ëŒ“ê¸€
   â†’ my-tubeì—ì„œ ì ˆëŒ€ ì ‘ê·¼ ë¶ˆê°€

âœ… Tenant Aì˜ JWT
   â†’ Tenant Bì—ì„œ ê²€ì¦ ì‹¤íŒ¨
```

### 2. ì„¤ì • ë…ë¦½ì„±

```
jaehyeong-tech:
  - JWT ë§Œë£Œ: 7ì¼
  - ë¹„ë°€ë²ˆí˜¸: ìµœì†Œ 8ì, ëŒ€ë¬¸ì í•„ìš”
  - Google OAuth: í™œì„±í™”

my-shop:
  - JWT ë§Œë£Œ: 30ì¼
  - ë¹„ë°€ë²ˆí˜¸: ìµœì†Œ 12ì, íŠ¹ìˆ˜ë¬¸ì í•„ìš”
  - Google OAuth: ë¹„í™œì„±í™”

my-tube:
  - JWT ë§Œë£Œ: 1ë…„
  - ë¹„ë°€ë²ˆí˜¸: ìµœì†Œ 8ì
  - Github OAuth: í™œì„±í™”
```

### 3. ë¦¬ì†ŒìŠ¤ ë…ë¦½ì„±

```
Comment Service:
  âœ… post ëŒ“ê¸€ (jaehyeong-tech)
  âœ… product ë¦¬ë·° (my-shop)
  âœ… video ëŒ“ê¸€ (my-tube)
  âœ… ticket ì½”ë©˜íŠ¸ (my-helpdesk)
  âœ… ë¬´ì—‡ì´ë“  ê°€ëŠ¥!

Storage Service:
  âœ… post ì´ë¯¸ì§€
  âœ… product ì‚¬ì§„
  âœ… video ì¸ë„¤ì¼
  âœ… user ì•„ë°”íƒ€
  âœ… ë¬´ì—‡ì´ë“  ì €ì¥!
```

### 4. ë…ë¦½ ë°°í¬

```
Auth Service ì—…ë°ì´íŠ¸:
  â†’ ëª¨ë“  Tenantì— ì¦‰ì‹œ ì ìš©
  â†’ í•œ ë²ˆ ë°°í¬ë¡œ ëª¨ë“  í”„ë¡œì íŠ¸ í˜œíƒ

Blog Service ì—…ë°ì´íŠ¸:
  â†’ jaehyeong-techë§Œ ì˜í–¥
  â†’ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ ë¬´ê´€
```

---

## ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… êµ¬í˜„í•´ì•¼ í•  ë³´ì•ˆ ì¡°ì¹˜

```
[ âœ… ] ëª¨ë“  ì¿¼ë¦¬ì— tenantId í•„í„° ê°•ì œ
[ âœ… ] JWT ê²€ì¦ ì‹œ tenantId ì¼ì¹˜ í™•ì¸
[ âœ… ] Tenantë³„ ë…ë¦½ì ì¸ JWT Secret
[ âœ… ] Row-Level Security (RLS) í™œì„±í™” (ì„ íƒì )
[ âœ… ] API Gatewayì—ì„œ Tenant ë¼ìš°íŒ…
[ âœ… ] Rate Limiting (Tenantë³„)
[ âœ… ] ê°ì‚¬ ë¡œê·¸ (Tenantë³„ í™œë™ ì¶”ì )
[ âœ… ] CORS (Tenantë³„ í—ˆìš© Origin)
```

### âŒ ì ˆëŒ€ í•˜ë©´ ì•ˆ ë˜ëŠ” ê²ƒ

```
[ âŒ ] tenantId ì—†ì´ ì¿¼ë¦¬
[ âŒ ] JWT Secret ê³µìœ 
[ âŒ ] Cross-Tenant ë°ì´í„° ì¡°ì¸
[ âŒ ] Tenant ì •ë³´ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë°›ê¸°
[ âŒ ] tenantIdë¥¼ JWT Payloadì—ë§Œ ì˜ì¡´
```

---

## í™•ì¥ ì‹œë‚˜ë¦¬ì˜¤

### ìƒˆ í”„ë¡œì íŠ¸ ì¶”ê°€ (my-helpdesk)

```
1. Tenant ìƒì„±
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   POST /api/tenants
   {
     "name": "my-helpdesk",
     "domain": "helpdesk.com",
     "jwtExpiry": "7d"
   }

2. ê¸°ì¡´ ë²”ìš© ì„œë¹„ìŠ¤ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥!
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   âœ… Auth Service: ë¡œê·¸ì¸/íšŒì›ê°€ì…
   âœ… Comment Service: í‹°ì¼“ ì½”ë©˜íŠ¸
   âœ… Storage Service: ì²¨ë¶€íŒŒì¼

3. ì „ìš© ì„œë¹„ìŠ¤ë§Œ ê°œë°œ
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   âœ… Ticket Service (í‹°ì¼“ ê´€ë¦¬)
   âœ… SLA Service (SLA ì¶”ì )

4. ë°°í¬
   â”€â”€â”€â”€
   ì´ ê°œë°œ ì‹œê°„: 2ì£¼ (ë²”ìš© ì„œë¹„ìŠ¤ ì¬ì‚¬ìš©ìœ¼ë¡œ ë‹¨ì¶•)
   ì¦ë¶„ ë¹„ìš©: $50/ì›” (ì „ìš© ì„œë¹„ìŠ¤ë§Œ)
```

---

## ìš”ì•½

### ë²”ìš© ì„œë¹„ìŠ¤ (ì¬ì‚¬ìš© ê°€ëŠ¥)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì„œë¹„ìŠ¤              â”‚ ê²©ë¦¬ ë°©ì‹     â”‚ ë²”ìš©ì„±        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Auth Service        â”‚ tenantId     â”‚ ëª¨ë“  ì›¹ì•±     â”‚
â”‚ Comment Service     â”‚ tenantId +   â”‚ ëª¨ë“  ë¦¬ì†ŒìŠ¤   â”‚
â”‚                     â”‚ resourceType â”‚               â”‚
â”‚ Storage Service     â”‚ tenantId +   â”‚ ëª¨ë“  íŒŒì¼     â”‚
â”‚                     â”‚ resourceType â”‚               â”‚
â”‚ Analytics Service   â”‚ tenantId     â”‚ ëª¨ë“  ì´ë²¤íŠ¸   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì „ìš© ì„œë¹„ìŠ¤ (í”„ë¡œì íŠ¸ íŠ¹í™”)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì„œë¹„ìŠ¤              â”‚ ì‚¬ìš© í”„ë¡œì íŠ¸             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Blog Service        â”‚ jaehyeong-tech           â”‚
â”‚ Page Service        â”‚ jaehyeong-tech           â”‚
â”‚ Product Service     â”‚ my-shop                  â”‚
â”‚ Order Service       â”‚ my-shop                  â”‚
â”‚ Video Service       â”‚ my-tube                  â”‚
â”‚ Ticket Service      â”‚ my-helpdesk              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ê²°ë¡ 

**Tenant ëª¨ë¸ ì•„í‚¤í…ì²˜ë¥¼ ì‚¬ìš©í•˜ë©´:**

âœ… í•˜ë‚˜ì˜ ì„œë¹„ìŠ¤ë¥¼ ì—¬ëŸ¬ í”„ë¡œì íŠ¸ê°€ ê³µìœ 
âœ… ë°ì´í„° ì™„ì „ ê²©ë¦¬ (ë³´ì•ˆ ë³´ì¥)
âœ… ì„¤ì • ë…ë¦½ì„± (í”„ë¡œì íŠ¸ë³„ ì»¤ìŠ¤í„°ë§ˆì´ì§•)
âœ… ë¹„ìš© ì ˆê° (í”„ë¡œì íŠ¸ ì¶”ê°€ ì‹œ ì¦ë¶„ ë¹„ìš© ìµœì†Œ)
âœ… ë¹ ë¥¸ ì‹ ê·œ í”„ë¡œì íŠ¸ ëŸ°ì¹­ (ë²”ìš© ì„œë¹„ìŠ¤ ì¬ì‚¬ìš©)

**ì´ê²ƒì´ ìµœì¢… ì•„í‚¤í…ì²˜ì…ë‹ˆë‹¤!** ğŸ‰

---

**ë¬¸ì„œ ë²„ì „**: 1.0
**ì‘ì„±ì¼**: 2026-01-16
**ì‘ì„±ì**: Claude (AI Assistant)
